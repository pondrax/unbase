import{_ as K}from"./preload-helper.a4192956.js";import{w as P,d as V}from"./index.2ac1d011.js";import{C as d}from"./scheduler.776094f6.js";const oe=!0,ne=oe;var ce=Object.defineProperty,ue=Object.defineProperties,de=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,M=(r,e,a)=>e in r?ce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,u=(r,e)=>{for(var a in e||(e={}))J.call(e,a)&&M(r,a,e[a]);if(x)for(var a of x(e))Q.call(e,a)&&M(r,a,e[a]);return r},g=(r,e)=>ue(r,de(e)),R=(r,e)=>{var a={};for(var t in r)J.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&x)for(var t of x(r))e.indexOf(t)<0&&Q.call(r,t)&&(a[t]=r[t]);return a},_=["error","warn","debug"],U=({logger:r=console,level:e=_[1],prefix:a="[i18n]: "})=>_.reduce((t,i,l)=>g(u({},t),{[i]:s=>_.indexOf(e)>=l&&r[i](`${a}${s}`)}),{}),p=U({}),pe=r=>{p=r},z=r=>{var e=r,{parser:a,key:t,params:i,translations:l,locale:s,fallbackLocale:o}=e,n=R(e,["parser","key","params","translations","locale","fallbackLocale"]);if(!t)return p.warn(`No translation key provided ('${s}' locale). Skipping translation...`),"";if(!s)return p.warn(`No locale provided for '${t}' key. Skipping translation...`),"";let c=(l[s]||{})[t];return o&&c===void 0&&(c=(l[o]||{})[t]),n.hasOwnProperty("fallbackValue")&&c===void 0?n.fallbackValue:a.parse(c,i,s,t)},m=(...r)=>r.length?r.filter(e=>!!e).map(e=>{let a=`${e}`.toLowerCase();try{let[t]=Intl.Collator.supportedLocalesOf(e);if(!t)throw new Error;a=t}catch{p.warn(`'${e}' locale is non-standard.`)}return a}):[],E=(r,e,a)=>Object.keys(r||{}).reduce((t,i)=>{let l=r[i],s=a?`${a}.${i}`:`${i}`;return e&&Array.isArray(l)?g(u({},t),{[s]:l.map(o=>E(o,e))}):l&&typeof l=="object"?u(u({},t),E(l,e,s)):g(u({},t),{[s]:l})},{}),fe=r=>r.reduce((e,{key:a,data:t,locale:i})=>{if(!t)return e;let[l]=m(i),s=g(u({},e[l]||{}),{[a]:t});return g(u({},e),{[l]:s})},{}),he=async r=>{try{let e=await Promise.all(r.map(a=>{var t=a,{loader:i}=t,l=R(t,["loader"]);return new Promise(async s=>{let o;try{o=await i()}catch(n){p.error(`Failed to load translation. Verify your '${l.locale}' > '${l.key}' Loader.`),p.error(n)}s(g(u({loader:i},l),{data:o}))})}));return fe(e)}catch(e){p.error(e)}return{}},ge=r=>e=>{try{if(typeof e=="string")return e===r;if(typeof e=="object")return e.test(r)}catch{p.error("Invalid route config!")}return!1},H=(r,e)=>{let a=!0;try{a=Object.keys(r).filter(t=>r[t]!==void 0).every(t=>r[t]===e[t])}catch{}return a},W=1e3*60*60*24,me=class{constructor(r){this.cachedAt=0,this.loadedKeys={},this.currentRoute=P(),this.config=P(),this.isLoading=P(!1),this.promises=new Set,this.loading={subscribe:this.isLoading.subscribe,toPromise:(e,a)=>{let{fallbackLocale:t}=d(this.config),i=Array.from(this.promises).filter(l=>{let s=H({locale:m(e)[0],route:a},l);return t&&(s=s||H({locale:m(t)[0],route:a},l)),s}).map(({promise:l})=>l);return Promise.all(i)},get:()=>d(this.isLoading)},this.privateRawTranslations=P({}),this.rawTranslations={subscribe:this.privateRawTranslations.subscribe,get:()=>d(this.rawTranslations)},this.privateTranslations=P({}),this.translations={subscribe:this.privateTranslations.subscribe,get:()=>d(this.translations)},this.locales=g(u({},V([this.config,this.privateTranslations],([e,a])=>{if(!e)return[];let{loaders:t=[]}=e,i=t.map(({locale:s})=>s),l=Object.keys(a).map(s=>s);return Array.from(new Set([...m(...i),...m(...l)]))},[])),{get:()=>d(this.locales)}),this.internalLocale=P(),this.loaderTrigger=V([this.internalLocale,this.currentRoute],([e,a],t)=>{var i,l;e!==void 0&&a!==void 0&&!(e===((i=d(this.loaderTrigger))==null?void 0:i[0])&&a===((l=d(this.loaderTrigger))==null?void 0:l[1]))&&(p.debug("Triggering translation load..."),t([e,a]))},[]),this.localeHelper=P(),this.locale={subscribe:this.localeHelper.subscribe,forceSet:this.localeHelper.set,set:this.internalLocale.set,update:this.internalLocale.update,get:()=>d(this.locale)},this.initialized=V([this.locale,this.currentRoute,this.privateTranslations],([e,a,t],i)=>{d(this.initialized)||i(e!==void 0&&a!==void 0&&!!Object.keys(t).length)}),this.translation=V([this.privateTranslations,this.locale,this.isLoading],([e,a,t],i)=>{let l=e[a];l&&Object.keys(l).length&&!t&&i(l)},{}),this.t=g(u({},V([this.config,this.translation],e=>{var[a]=e,t=a,{parser:i,fallbackLocale:l}=t,s=R(t,["parser","fallbackLocale"]);return(o,...n)=>z(u({parser:i,key:o,params:n,translations:this.translations.get(),locale:this.locale.get(),fallbackLocale:l},s.hasOwnProperty("fallbackValue")?{fallbackValue:s.fallbackValue}:{}))})),{get:(e,...a)=>d(this.t)(e,...a)}),this.l=g(u({},V([this.config,this.translations],e=>{var[a,...t]=e,i=a,{parser:l,fallbackLocale:s}=i,o=R(i,["parser","fallbackLocale"]),[n]=t;return(c,f,...O)=>z(u({parser:l,key:f,params:O,translations:n,locale:c,fallbackLocale:s},o.hasOwnProperty("fallbackValue")?{fallbackValue:o.fallbackValue}:{}))})),{get:(e,a,...t)=>d(this.l)(e,a,...t)}),this.getLocale=e=>{let{fallbackLocale:a}=d(this.config)||{},t=e||a;if(!t)return;let i=this.locales.get();return i.find(l=>m(t).includes(l))||i.find(l=>m(a).includes(l))},this.setLocale=e=>{if(e&&e!==d(this.internalLocale))return p.debug(`Setting '${e}' locale.`),this.internalLocale.set(e),this.loading.toPromise(e,d(this.currentRoute))},this.setRoute=e=>{if(e!==d(this.currentRoute)){p.debug(`Setting '${e}' route.`),this.currentRoute.set(e);let a=d(this.internalLocale);return this.loading.toPromise(a,e)}},this.loadConfig=async e=>{await this.configLoader(e)},this.getTranslationProps=async(e=this.locale.get(),a=d(this.currentRoute))=>{let t=d(this.config);if(!t||!e)return[];let i=this.translations.get(),{loaders:l,fallbackLocale:s="",cache:o=W}=t||{},n=Number.isNaN(+o)?W:+o;this.cachedAt?Date.now()>n+this.cachedAt&&(p.debug("Refreshing cache."),this.loadedKeys={},this.cachedAt=0):(p.debug("Setting cache timestamp."),this.cachedAt=Date.now());let[c,f]=m(e,s),O=i[c],$=i[f],L=(l||[]).map(h=>{var y=h,{locale:T}=y,v=R(y,["locale"]);return g(u({},v),{locale:m(T)[0]})}).filter(({routes:h})=>!h||(h||[]).some(ge(a))).filter(({key:h,locale:y})=>y===c&&(!O||!(this.loadedKeys[c]||[]).includes(h))||s&&y===f&&(!$||!(this.loadedKeys[f]||[]).includes(h)));if(L.length){this.isLoading.set(!0),p.debug("Fetching translations...");let h=await he(L);this.isLoading.set(!1);let y=Object.keys(h).reduce((v,b)=>g(u({},v),{[b]:Object.keys(h[b])}),{}),T=L.filter(({key:v,locale:b})=>(y[b]||[]).some(j=>`${j}`.startsWith(v))).reduce((v,{key:b,locale:j})=>g(u({},v),{[j]:[...v[j]||[],b]}),{});return[h,T]}return[]},this.addTranslations=(e,a)=>{if(!e)return;let t=d(this.config),{preprocess:i}=t||{};p.debug("Adding translations...");let l=Object.keys(e||{});this.privateRawTranslations.update(s=>l.reduce((o,n)=>g(u({},o),{[n]:u(u({},o[n]||{}),e[n])}),s)),this.privateTranslations.update(s=>l.reduce((o,n)=>{let c=!0,f=e[n];return typeof i=="function"&&(f=i(f)),(typeof i=="function"||i==="none")&&(c=!1),g(u({},o),{[n]:u(u({},o[n]||{}),c?E(f,i==="preserveArrays"):f)})},s)),l.forEach(s=>{let o=Object.keys(e[s]).map(n=>`${n}`.split(".")[0]);a&&(o=a[s]),this.loadedKeys[s]=Array.from(new Set([...this.loadedKeys[s]||[],...o||[]]))})},this.loader=async([e,a])=>{let t=this.getLocale(e)||void 0;p.debug(`Adding loader promise for '${t}' locale and '${a}' route.`);let i=(async()=>{let l=await this.getTranslationProps(t,a);l.length&&this.addTranslations(...l)})();this.promises.add({locale:t,route:a,promise:i}),i.then(()=>{t&&this.locale.get()!==t&&this.locale.forceSet(t)})},this.loadTranslations=(e,a=d(this.currentRoute)||"")=>{let t=this.getLocale(e);if(t)return this.setRoute(a),this.setLocale(t),this.loading.toPromise(t,a)},this.loaderTrigger.subscribe(this.loader),this.isLoading.subscribe(async e=>{e&&this.promises.size&&(await this.loading.toPromise(),this.promises.clear(),p.debug("Loader promises have been purged."))}),r&&this.loadConfig(r)}async configLoader(r){if(!r)return p.error("No config provided!");let e=r,{initLocale:a,fallbackLocale:t,translations:i,log:l}=e,s=R(e,["initLocale","fallbackLocale","translations","log"]);l&&pe(U(l)),[a]=m(a),[t]=m(t),p.debug("Setting config."),this.config.set(u({initLocale:a,fallbackLocale:t,translations:i},s)),i&&this.addTranslations(i),a&&await this.loadTranslations(a)}},X=Object.defineProperty,ye=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,q=(r,e,a)=>e in r?X(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,k=(r,e)=>{for(var a in e||(e={}))Y.call(e,a)&&q(r,a,e[a]);if(S)for(var a of S(e))Z.call(e,a)&&q(r,a,e[a]);return r},I=(r,e)=>ye(r,ve(e)),w=(r,e)=>{var a={};for(var t in r)Y.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&S)for(var t of S(r))e.indexOf(t)<0&&Z.call(r,t)&&(a[t]=r[t]);return a},be=(r,e)=>{for(var a in e)X(r,a,{get:e[a],enumerable:!0})},ee={};be(ee,{ago:()=>Te,currency:()=>Ve,date:()=>Le,eq:()=>N,gt:()=>te,gte:()=>$e,lt:()=>ae,lte:()=>Oe,ne:()=>ke,number:()=>we});var D=(r,e)=>{let{modifierDefaults:a}=e||{},{[r]:t}=a||{};return t||{}},N=({value:r,options:e=[],defaultValue:a=""})=>(e.find(({key:t})=>`${t}`.toLowerCase()===`${r}`.toLowerCase())||{}).value||a,ke=({value:r,options:e=[],defaultValue:a=""})=>(e.find(({key:t})=>`${t}`.toLowerCase()!==`${r}`.toLowerCase())||{}).value||a,ae=({value:r,options:e=[],defaultValue:a=""})=>(e.sort((t,i)=>+t.key-+i.key).find(({key:t})=>+r<+t)||{}).value||a,te=({value:r,options:e=[],defaultValue:a=""})=>(e.sort((t,i)=>+i.key-+t.key).find(({key:t})=>+r>+t)||{}).value||a,Oe=({value:r,options:e=[],defaultValue:a=""})=>N({value:r,options:e,defaultValue:ae({value:r,options:e,defaultValue:a})}),$e=({value:r,options:e=[],defaultValue:a=""})=>N({value:r,options:e,defaultValue:te({value:r,options:e,defaultValue:a})}),we=({value:r,props:e,defaultValue:a="",locale:t="",parserOptions:i})=>{if(!t)return"";let l=D("number",i),{maximumFractionDigits:s}=l,o=w(l,["maximumFractionDigits"]),n=(e==null?void 0:e.number)||{},{maximumFractionDigits:c=s||2}=n,f=w(n,["maximumFractionDigits"]);return new Intl.NumberFormat(t,k(I(k({},o),{maximumFractionDigits:c}),f)).format(+r||+a)},Le=({value:r,props:e,defaultValue:a="",locale:t="",parserOptions:i})=>{if(!t)return"";let l=w(D("date",i),[]),s=w((e==null?void 0:e.date)||{},[]);return new Intl.DateTimeFormat(t,k(k({},l),s)).format(+r||+a)},F=[{key:"second",multiplier:1e3},{key:"minute",multiplier:60},{key:"hour",multiplier:60},{key:"day",multiplier:24},{key:"week",multiplier:7},{key:"month",multiplier:13/3},{key:"year",multiplier:12}],re=(r="",e="")=>new RegExp(`^${r}s?$`).test(e),je=r=>F.indexOf(F.find(({key:e})=>re(e,r))),Pe=(r,e)=>F.reduce(([a,t],{key:i,multiplier:l},s)=>{if(re(t,e))return[a,t];if(!t||s===je(t)+1){let o=Math.round(a/l);if(!t||Math.abs(o)>=1||e!=="auto")return[o,i]}return[a,t]},[r,""]),Te=({value:r,defaultValue:e="",locale:a="",props:t,parserOptions:i})=>{if(!a)return"";let l=D("ago",i),{format:s,numeric:o}=l,n=w(l,["format","numeric"]),c=(t==null?void 0:t.ago)||{},{format:f=s||"auto",numeric:O=o||"auto"}=c,$=w(c,["format","numeric"]),L=+r||+e,h=Pe(L,f);return new Intl.RelativeTimeFormat(a,k(I(k({},n),{numeric:O}),$)).format(...h)},Ve=({value:r,defaultValue:e="",locale:a="",props:t,parserOptions:i})=>{if(!a)return"";let l=D("currency",i),{ratio:s,currency:o}=l,n=w(l,["ratio","currency"]),c=(t==null?void 0:t.currency)||{},{ratio:f=s||1,currency:O=o}=c,$=w(c,["ratio","currency"]);return new Intl.NumberFormat(a,k(I(k({},n),{style:"currency",currency:O}),$)).format(f*(r||e))},Re=r=>typeof r=="string"&&/{{(?:(?!{{|}}).)+}}/.test(r),C=r=>typeof r=="string"?r.replace(/\\(?=:|;|{|})/g,""):r,xe=({value:r,props:e,payload:a,parserOptions:t,locale:i})=>`${r}`.replace(/{{\s*(?:(?!{{|}}).)+\s*}}/g,l=>{let s=C(`${l.match(/(?!{|\s).+?(?!\\[:;]).(?=\s*(?:[:;]|}}$))/)}`),o=a==null?void 0:a[s],[,n=""]=l.match(/.+?(?!\\;).;\s*default\s*:\s*([^\s:;].+?(?:\\[:;]|[^;}])*)(?=\s*(?:;|}}$))/i)||[];n=n||(a==null?void 0:a.default)||"";let[,c=""]=l.match(/{{\s*(?:[^;]|(?:\\;))+\s*(?:(?!\\:).[:])\s*(?!\s)((?:\\;|[^;])+?)(?=\s*(?:[;]|}}$))/i)||[];if(o===void 0&&c!=="ne")return n;let f=!!c,{customModifiers:O}=t||{},$=k(k({},ee),O||{});c=Object.keys($).includes(c)?c:"eq";let L=$[c],h=(l.match(/[^\s:;{](?:[^;]|\\[;])+[^:;}]/gi)||[]).reduce((y,T,v)=>{if(v>0){let b=C(`${T.match(/(?:(?:\\:)|[^:])+/)}`.trim()),j=`${T.match(/(?:(?:\\:)|[^:])+$/)}`.trimStart();if(b&&b!=="default"&&j)return[...y,{key:b,value:j}]}return y},[]);return!f&&!h.length?o:L({value:o,options:h,props:e,defaultValue:n,locale:i,parserOptions:t})}),le=({value:r,props:e,payload:a,parserOptions:t,locale:i})=>{if(Re(r)){let l=xe({value:r,payload:a,props:e,parserOptions:t,locale:i});return le({value:l,payload:a,props:e,parserOptions:t,locale:i})}else return C(r)},Se=r=>({parse:(e,[a,t],i,l)=>(a!=null&&a.default&&e===void 0&&(e=a.default),e===void 0&&(e=l),le({value:e,payload:a,props:t,parserOptions:r,locale:i}))}),Ae=Se,De=Object.defineProperty,_e=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,B=(r,e,a)=>e in r?De(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,Fe=(r,e)=>{for(var a in e||(e={}))ie.call(e,a)&&B(r,a,e[a]);if(A)for(var a of A(e))se.call(e,a)&&B(r,a,e[a]);return r},Ce=(r,e)=>_e(r,Ee(e)),Ie=(r,e)=>{var a={};for(var t in r)ie.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&A)for(var t of A(r))e.indexOf(t)<0&&se.call(r,t)&&(a[t]=r[t]);return a},G=r=>{var e=r,{parserOptions:a={}}=e,t=Ie(e,["parserOptions"]);return Ce(Fe({},t),{parser:Ae(a)})},Ne=class extends me{constructor(e){super(e&&G(e)),this.loadConfig=a=>super.configLoader(G(a))}},Ke=Ne;function Me(){const r="lang";return Object.entries(Object.assign({"../lang/en.json":()=>K(()=>import("./en.0f2ab467.js"),[],import.meta.url),"../lang/id.json":()=>K(()=>import("./id.5ebae195.js"),[],import.meta.url)})).map(([e,a])=>{const t=new RegExp(`/${r}/([^/]+)(?:/([^/.]+))?\\.json$`),[,i,l]=e.match(t)||[];return{locale:i,key:l||"",loader:a}})}const ze={loaders:Me()},{t:Je,locale:He,locales:Qe,loading:Ue,loadTranslations:Xe}=new Ke(ze);He.subscribe(r=>{r&&ne&&(document.cookie=`lang=${r}; path=/`)});export{He as a,Qe as b,Xe as l,Je as t};
